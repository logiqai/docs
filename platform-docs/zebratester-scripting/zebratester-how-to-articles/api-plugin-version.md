# API Plugin Version

This tutorial will guide you in creating and uploading a check which utilizes ADR to pull data from the Apica ADR Rest API Plugin, which

The ADR check you will create pulls a username and password to perform a dummy login to [https://the-internet.herokuapp.com/login](https://the-internet.herokuapp.com/login). The credentials are listed right on the page of the site, which makes clear it is intended for test purposes only. The site stores no data and needs no personalized credentials whatsoever. However, it gives a “success” message upon successful login with the dummy credentials which is all we need.

The .zip file and inline script which can be used when following this tutorial is attached:





<table data-header-hidden><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Step</strong></td><td><strong>Screenshot/Notes</strong></td></tr><tr><td><h3 id="howtoutilizeapicadatarepositoryfromzt-apipluginversion-step1-populateadrwiththenecessarydata">Step 1: Populate ADR With the Necessary Data</h3><p>You will need a login to the ADR instance if you want to populate the ADR instance with your own tables/data. For purposes of the demo, you can use the test table specified in the script using the API plugin.</p></td><td></td></tr><tr><td><h3 id="howtoutilizeapicadatarepositoryfromzt-apipluginversion-step2-addtherestapiplugintoyourscript">Step 2: Add the REST API Plugin to Your Script</h3><p>First, you must add the ADRRestApiPlugin.class to your Plugins directory and then pull it into your script using the “Add Plug-in” button in the Var Handler.</p><p>Before you upload the plugin, you must specify table name, API call to be used, etc. These will be converted into variables within the Var Finder as User Input Variables. Adding the parameters as User Input Variables is helpful because it allows users to change parameters at runtime as needed.</p><p>There will be an option to export the output of the API call as a variable. You must do this! The API Plugin simply executes an API call and returns the JSON as an output variable so you must save the output as “jsonResponse” or similar.</p></td><td></td></tr><tr><td><h3 id="howtoutilizeapicadatarepositoryfromzt-apipluginversion-step3-addaninlinescripttoprocessdatareturnedf">Step 3: Add an Inline Script to Process Data Returned From ADR Call</h3><p>Next, you need to create and add an inline script which will <em>process</em> the data returned from the REST API plugin. We’ve included the inline script we used here. The inline script simply pulls the username and password stored in the table and sets the username and password to those returned values. Add the inline script via the “Add Inline Script” button above and configure the input/output variables to take the jsonResponse variable as the input and return the username and password variables as the output. See screenshot 1 to the right.</p><p>Assign the username and password variables you extracted to the “username” and “password” variables in the script. See screenshot 2 to the right.</p><p>When you create the script, make sure that the plugin runs before the inline script so that the returned JSON object will have the necessary data and will not be empty! In the example script, we configured both the plugin and the inline script to run “at start of loop” so that should work for your implementation as well.</p></td><td></td></tr><tr><td><h3 id="howtoutilizeapicadatarepositoryfromzt-apipluginversion-step4-createthecheckwithspecializedsettings">Step 4: Create the Check With Specialized Settings</h3><p>You will need to upload the .zip file and then specify any arguments you pass in as user input in “additional arguments”. These are the user inputs in the test check linked above:</p><pre><code>-ats_command "/?cmd=ats_retrieve_row_by_column" -ats_url "http://your.server.hostname:8992" -column_names "index" -column_values "index01" -table_name "userlist"
</code></pre><p>If you decide to set these user inputs (e.g. -ats_command as “standalone variables” rather than “user input fields” within the script, and thus hard-code the values, you will not need to pass them via additional options.</p></td><td></td></tr></tbody></table>

After following these steps you should be able to run your ADR check successfully!
