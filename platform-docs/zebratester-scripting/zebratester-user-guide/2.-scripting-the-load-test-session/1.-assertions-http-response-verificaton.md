# 1. Assertions - HTTP Response Verificaton

* Introduction to Response Verification
  *
    * Default View: Waterfall
    * The Response Verification View
    * The Response Verification Options
    * Verify Content
      * Verify By Size
    * Verify Content
      * Verify By Text
    * Failure Action
    * Reset Settings
  * Text Operations
    * Search Text Examples

## Introduction to Response Verification <a href="#introduction-to-response-verification" id="introduction-to-response-verification"></a>

_**Avoid executing tests without controlling the received content of URL calls by comparing them to the originally recorded data.**_

![check mark](https://pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/caa27a19-fc09-4452-b2b4-a301552fd69c/32x32/2714.png) Many errors from Web server applications are embedded inside valid HTTP 200 responses. Therefore, the content of the responses must be also be checked to detect content errors under load.

For this reason, ZebraTester examines the content of all recorded URL calls and automatically applies a content check per each URL call using a heuristic algorithm. This algorithm performs content checks by searching for an ASCII-text string inside the received content; however, if this seems impossible, or if this doesn't seem to make sense, the received content is checked by its size (content length) instead of by searching an ASCII-text string.

So you can use one (or more) variables from the Var Handler as part of a test-string on the URL using the **Response Verification** view.

| **Icon/View**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | **Screenshot**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <h4 id="default-view-waterfall">Default View: Waterfall</h4><p>Open image-20210216-213611.png<img src="blob:https://apica-kb.atlassian.net/a7e1b1a1-f57d-4598-a7ac-05dbbd3feb31#media-blob-url=true&#x26;id=ab91a905-5e6a-4181-8b0b-4e36d50d426a&#x26;collection=contentId-151814171&#x26;contextId=151814171&#x26;width=151&#x26;height=212&#x26;alt=" alt=""></p><p>There will be two alternate views of the recorded data; the <strong>default</strong> is a <em><strong>waterfall view</strong></em> of the URL Calls, with the specific recorded information for each row.</p>                                                                                                                             | <p>Open image-20210216-214451.png<img src="blob:https://apica-kb.atlassian.net/3f80f0c2-39d6-4dc7-bc03-6e7ac4605cbf#media-blob-url=true&#x26;id=e6a9deb8-5a08-44e8-adc7-b55e37f131eb&#x26;collection=contentId-151814171&#x26;contextId=151814171&#x26;width=1444&#x26;height=430&#x26;alt=" alt=""></p><p> </p><p>The other is the Alternate <strong>Response Verification View</strong> that will test the responses against the parameters you set.</p><p>An eye icon-toggle, found in the upper right, indicates if you are in the waterfall view (grey eye) or the response Verification View (green eye). If you are in the waterfall view (Above<img src="https://pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/caa27a19-fc09-4452-b2b4-a301552fd69c/32x32/261d.png" alt="index pointing up">), click the grey eye icon to access the “Alter View,” which is short for the <strong>Alternate</strong> <strong>Response Verification View.</strong></p> |
| <h4 id="the-response-verification-view">The Response Verification View</h4><p>Open image-20210216-213108.png<img src="blob:https://apica-kb.atlassian.net/22d97513-459d-4876-a2f1-c8406925812d#media-blob-url=true&#x26;id=031c2acd-bb40-4e95-975c-35e7b66b3ac5&#x26;collection=contentId-151814171&#x26;contextId=151814171&#x26;width=334&#x26;height=478&#x26;alt=" alt=""></p><p>This will produce a view with a rightmost column titled: “Response Verification.”</p><p>In this view, look for the magnifier icon on each line that will open the HTTP Response Verification &#x26; Failure Action Dialog.</p><p>Close-up view of hovering over the magnifier icon. Notice each line has its own icon:</p> | Open image-20210216-215520.png![](blob:https://apica-kb.atlassian.net/a9445a08-595d-45b2-b386-1ce75a90656b#media-blob-url=true\&id=176d7b8e-bd70-4a3d-8932-f23544e8071a\&collection=contentId-151814171\&contextId=151814171\&width=1605\&height=477\&alt=)Open image-20210217-150519.png![](blob:https://apica-kb.atlassian.net/209284ce-e5f9-4ce6-8133-6940611833cf#media-blob-url=true\&id=a40d83aa-e3bd-47b8-804f-ad63c8c6dda8\&collection=contentId-151814171\&contextId=151814171\&mimeType=image%2Fpng\&name=image-20210217-150519.png\&size=76438\&width=610\&height=364\&alt=)                                                                                                                                                                                                                                                                                                                                                                                           |
| <p><strong>HTTP Response Verification &#x26; failure Action</strong></p><p>After clicking the magnifier icon, this dialog will set what parameters and thresholds to verify/fail a returned response.</p><p>Note that you can set this for one URL or all URLs that match a specific content type.</p>                                                                                                                                                                                                                                                                                                                                                                                                          | Open image-20210217-160232.png![](blob:https://apica-kb.atlassian.net/36957a5c-18fa-4bf5-abda-fec16ebf6fad#media-blob-url=true\&id=6d1dac47-216c-4dfb-b672-81acf4a6ce1d\&collection=contentId-151814171\&contextId=151814171\&mimeType=image%2Fpng\&name=image-20210217-160232.png\&size=126867\&width=1047\&height=593\&alt=)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

| <h4 id="the-response-verification-options">The Response Verification Options</h4><p>You select certain responses and then use them as verifications (with the above options) that will be recalled (and applied) when generating the load test program execution.</p><p>All <em>response verification modifications</em> are stored together with the recorded web surfing session and reapplied if the web surfing session is reloaded.</p><p>During the execution of a load test program, the HTTP response code and the received MIME type of each URL call are always compared with the originally-recorded response from the web surfing session (if not disabled manually). The response verification menu allows the specification of how received content is to be tested:</p> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Open image-20210217-160232.png![](blob:https://apica-kb.atlassian.net/47c21e38-c3f7-4c2f-968c-8e4bdba27ed9#media-blob-url=true\&id=6d1dac47-216c-4dfb-b672-81acf4a6ce1d\&collection=contentId-151814171\&contextId=151814171\&mimeType=image%2Fpng\&name=image-20210217-160232.png\&size=126867\&width=1047\&height=593\&alt=)                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Verify HTTP Status Code**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | <p>If enabled, the HTTP status code of the URL call is verified. Additionally, multiple alternative HTTP status codes can be selected, affecting these status codes as valid/successful URL status codes. Apica recommends keeping the default settings.</p><ul><li>Disabling this option - or configuring multiple alternative HTTP status codes - may result in "false positive" measurements.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Verify Content-Type**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | <p>If enabled, verify the received content type (MIME type) of the URL call. Instead of configuring a simple search text fragment, a <a href="https://apica-kb.atlassian.net/wiki/spaces/DAZT/pages/151814171#Text-Operations%3A">text operation</a> or a variable can also be configured. Apica recommends keeping the default settings.</p><ul><li>Disabling this option may result in "false positive" measurements.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Verify Header Text**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | <p>If enabled, the configured text fragment is searched inside the received HTTP response header; an error is returned if this text fragment is not found.</p><ul><li>Instead of configuring a simple search text fragment, a <a href="https://apica-kb.atlassian.net/wiki/spaces/DAZT/pages/151814171#Text-Operations%3A">text operation</a> or a variable can also be configured. Please see the Text Operations section below for strings and examples.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <h4 id="verify-content">Verify Content</h4><p>If enabled, verify the received content of the URL call.</p><p><strong>Verify By Size</strong></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | <p>This means that only the size of the content is verified. This is fast and a good approach for completely static content, like images. You may also set an acceptable deviation of 0% if the content never changes.</p><ul><li>Instead of configuring a fixed size, a variable can also be used to verify the size.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <h4 id="verify-content.1">Verify Content </h4><p><strong>Verify By Text</strong></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | <p>Search for a text fragment inside the received content.</p><ul><li>This is the best method for verifying dynamically-generated content.</li><li>If the recorded content contains ASCII text, then the recoded content is analyzed, and you see rated suggestions (0..1) for suggested text fragments.</li><li>Alternatively, the content can also be verified by a <a href="https://apica-kb.atlassian.net/wiki/spaces/DAZT/pages/151814171#Text-Operations%3A">text operation</a> or a variable.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Max. Stored Content Size**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | <p>By configuring a value other than unlimited, all response data are read as usual during the load test execution, but only a part is stored internally.</p><ul><li>For example, this means that error snapshots, which are made in case of failures, may not contain all received response data.</li><li>On the other hand, configuring the maximum stored content size with <strong>a value of less or equal than 5 megabytes can save a lot of Java memory during the load test execution and allows you to receive response content data of a large size (multiple gigabytes), even when many hundreds of Web users are simulated by only one load generator.</strong></li><li><p>If a value other than unlimited is configured, the following restrictions apply during the execution of the load test:</p><ul><li>If the content data are received in a compressed format, they are not automatically decompressed if the response content is larger than the configured value.</li><li>The stored content data's real size may be a little bit smaller/larger than the configured maximum value (+/- 32 kilobytes).</li></ul></li></ul> |
| <h4 id="failure-action">Failure Action</h4>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | <p>The Failure Action determines what happens in case the URL call fails.</p><ul><li><strong>None - Continue Loop</strong> means that the simulated user continues to execute the current loop (repetition of web surfing session). Such failures are also named <strong>non-fatal errors</strong>. This option should only be used if no variables have to be extracted from the URL call's response - or in other words - only if succeeding URL calls do not depend on the response of this URL.</li><li><strong>Abort Loop >> Next Loop</strong> means that the current loop (repetition of web surfing session) of the simulated user is aborted and that the simulated user executes after that the next loop (if more loops per user are planned, or if the duration of the load test is not exceeded). Such failures are also named fatal errors. Optionally, you can activate the checkbox Terminate User, which affects how all simulated users for which this failure occurs are removed from further load test execution.</li></ul>                                                                                                 |
| <h4 id="reset-settings">Reset Settings</h4>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | <p>Reset the URL setting only or <strong>All URLs</strong> with a specific <strong>HTTP Status Code</strong> AND <strong>Content-Type</strong>.</p><p>By clicking on the <strong>Apply Default Settings</strong> button at the bottom of the window, you can undo your changes, and the default settings are reapplied.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

***

### Text Operations <a href="#text-operations" id="text-operations"></a>

Instead of searching the occurrence of a simple text fragment, the following **Text Operations** are also supported:

| **String** | **Description** |
| ---------- | --------------- |

| **String**                       | **Description**                                                                                                         |
| -------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
|  `![<search text>]`              |  The search text must not occur inside the received content.                                                            |
|  `#<int>[<search text>]`         |  The search text must occur exactly \<int> times inside the received content.                                           |
|  `#<int>-[<search text>]`        |  The search text must occur a minimum of \<int> times inside the received content.                                      |
|  `#<int1>-<int2>[<search text>]` |  The search text must occur a minimum of `<int1>` times, but not more than `<int2>` times, inside the received content. |

#### Search Text Examples <a href="#search-text-examples" id="search-text-examples"></a>

| **Text**             | **Description**                                                                                                         |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `hello`              | The search text "hello" must occur at least once inside the received content.                                           |
| `![ORA-01652]`       | The search text "ORA-01652" must not occur inside the received content.                                                 |
| `#1[Dear Mr.]`       | The search text "Dear Mr." must occur exactly one time inside the received content.                                     |
| `#1-2[Order Number]` | The search text "Order Number" must occur a minimum of one time and a maximum of two times inside the received content. |
| `#3-[new order]`     | The search text "new order" must occur a minimum of three times inside the received content.                            |

**Note:** One or more variable text patterns in the form of `${<variable name>}` are supported as a part of the search text; for example, `Welcome ${gender} {$name}`.

[\
](https://apica-kb.atlassian.net/wiki/label/DAZT/zebra)
