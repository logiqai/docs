# Splunk (Webhook Integration)

## Alerting Splunk with Webhooks <a href="#splunk-webhookintegration-alertingsplunkwithwebhooks" id="splunk-webhookintegration-alertingsplunkwithwebhooks"></a>

The Splunk integration allows Alerts to be delivered as messages to a [http://www.splunk.com](https://apica-kb.atlassian.net/wiki/pages/resumedraft.action?draftId=4631705) instance.



With Splunk, you can

* Correlate Apica Synthetic monitoring events with multiple other systems
* Use Splunk Search to locate incident alerts from keywords in the alert messages
* Visualize data in Splunk's Dashboard

**Note:** The Apica Alerter Service uses the external address `194.213.119.5`, so you need to make sure that this address is accessible in your network is open for the alerting to work.

* Alerting Splunk with Webhooks
* Creating a Splunk Target
  *
    * Create Splunk Target
  * Add the Splunk Target; Fields
    * Target Name
    * Host
    * Username
    * Password
    * Source Type
    * Source
    * Message
    * Add Webhook Splunk Target

## Creating a Splunk Target <a href="#splunk-webhookintegration-creatingasplunktarget" id="splunk-webhookintegration-creatingasplunktarget"></a>

Splunk Targets delivers alerts to a defined Splunk integration destination.



| **Step**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | **Screenshot**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <p><strong>Create Splunk Target</strong></p><ul><li>Click the <strong>WebHook</strong> button</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | ![](../../../../.gitbook/assets/2134052352.png)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| A blank target is created                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Select the Splunk Service                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <h3 id="splunk-webhookintegration-addthesplunktarget-fields">Add the Splunk Target; Fields</h3><h4 id="splunk-webhookintegration-targetname">Target Name</h4><ul><li>Enter a name that identifies the Splunk target in ASM.</li></ul><h4 id="splunk-webhookintegration-host">Host</h4><ul><li>Enter the IP or hostname of the Splunk instance.</li><li>The integration URL is the access point in Splunk for alert delivery. The URL format depends on your Splunk deployment type.</li><li><strong>SSL</strong>: Splunk uses SSL by default. So, if you enter a full URL with <code>http://</code>, this will automatically get overridden with <code>https://</code> for all calls to Splunk.</li><li><strong>Port:</strong> By default, the port <code>8089</code> is used to access Splunk.</li></ul><h4 id="splunk-webhookintegration-username">Username</h4><ul><li>Enter the <strong>Username</strong> that logs into the Splunk instance.</li><li>This must be a valid and active Splunk user with access to the REST API.</li></ul> | <p></p><p><strong>Note:</strong> For Splunk Cloud, see the <a href="https://apica-kb.atlassian.net/wiki/spaces/ASMDOCS/pages/4632821/Cloud+Deployment">Cloud Deployment</a> section.</p><p>More information on Source &#x26; Source Type, from Splunk Documentation:</p><ul><li><p><a href="https://docs.splunk.com/Splexicon:Source">Splexicon: Source Type</a></p><ul><li><a href="https://docs.splunk.com/Documentation/Splunk/7.2.7/Data/Whysourcetypesmatter">Why source types matter</a></li></ul></li><li><p><a href="https://docs.splunk.com/Splexicon:Source">Splexicon: Source</a></p><ul><li><a href="http://docs.splunk.com/Documentation/Splunk/6.6.3/Knowledge/Usedefaultfields">Use default fields</a></li></ul></li></ul><p></p><h4 id="splunk-webhookintegration-password">Password</h4><ul><li>Enter the <strong>Password</strong> is the password used to login to the Splunk instance.</li><li>This can be the password for any valid and active Splunk user, but it needs to match the Splunk Username setting.</li><li>Copy the password from the correct user in your Splunk instance and paste it into the text box.</li></ul><p>For the following fields, you can use <a href="https://apica-kb.atlassian.net/wiki/spaces/AM/pages/2134052980/Placeholders#New%3A-Message-Placeholders">Alerts Message Placeholders</a> in the title to add dynamic information.</p><h4 id="splunk-webhookintegration-sourcetype">Source Type</h4><p>The <strong>Source Type</strong> field is used to mark data as a particular type. It can be used for data formatting and searches.</p><ul><li>Enter a <strong>Source Type</strong> string</li></ul><h4 id="splunk-webhookintegration-source">Source</h4><p>The <strong>Source</strong> field is used to identify where an event originated. It can be used for indexing and searches.</p><ul><li>Enter a <strong>Source</strong> string</li></ul><h4 id="splunk-webhookintegration-message">Message</h4><ul><li>The delivered alert message can use all formatting provided by Splunk, and message placeholders for ASM information.</li></ul> |
| <h4 id="splunk-webhookintegration-addwebhooksplunktarget">Add Webhook Splunk Target</h4><p>When you are happy with all the settings, you can create the target.</p><ul><li>Click the <strong>Add Webhook Splunk Target</strong> button</li></ul><p>The Target is created, containing the selected user/targets.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
